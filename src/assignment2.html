<html>
  <head>
    <title>Assignment 2</title>
    <script>
      var orders = {};

      function chooseItem(item, price) {
        document.getElementById("item").innerText = item;
        document.getElementById("price").innerText = parseFloat(price).toFixed(2);
        document.getElementById("qty").value = 0;
      }

      function itemAddUpdate() {
        var item = document.getElementById("item").innerText;
        var price = document.getElementById("price").innerText;
        var qty = document.getElementById("qty").value;

        var col_totalpay = document.getElementById("totalpay");

        if (item != "..." && qty > 0) {
          //alert("Add " + item + "(" + price + " * " + qty + ")");
          var qtyprice = parseFloat(qty * price).toFixed(2);

          if (typeof orders[item] == "undefined") {
            var td_item = document.createElement("td");
            td_item.appendChild(document.createTextNode(item + " - "));
            var delitem = document.createElement("a");
            delitem.href = "javascript: itemDelete('" + item + "');";
            delitem.innerHTML = "Delete";
            td_item.appendChild(delitem);

            var td_price = document.createElement("td");
            td_price.innerText = parseFloat(price).toFixed(2);
            td_price.align="right";

            var td_qty = document.createElement("td");
            td_qty.innerText = qty;
            td_qty.align="center";

            var td_qtyprice = document.createElement("td");
            td_qtyprice.innerText = qtyprice;
            td_qtyprice.align="right";

            var row_new = document.createElement("tr");
            row_new.id = item;
            row_new.appendChild(td_item);
            row_new.appendChild(td_price);
            row_new.appendChild(td_qty);
            row_new.appendChild(td_qtyprice);

            var row_total = document.getElementById("total");
            row_total.parentNode.insertBefore(row_new, row_total);

            col_totalpay.innerText = parseFloat(parseFloat(col_totalpay.innerText) + parseFloat(qtyprice)).toFixed(2);

            orders[item] = {"price": price, "qty": qty, "tblrow": row_new};

          } else {
              var row_item =  orders[item].tblrow;
              var cols = row_item.getElementsByTagName("td");

              col_totalpay.innerText = parseFloat(parseFloat(col_totalpay.innerText) - parseFloat(cols[3].innerText) + parseFloat(qtyprice)).toFixed(2);

              cols[2].innerText = qty;
              cols[3].innerText = qtyprice;
          }
        }
      }

      function itemDelete(item) {
        var row_item = orders[item].tblrow;
        var cols = row_item.getElementsByTagName("td");
        var col_totalpay = document.getElementById("totalpay");

        col_totalpay.innerText = parseFloat(parseFloat(col_totalpay.innerText) - parseFloat(cols[3].innerText)).toFixed(2);

        row_item.parentNode.removeChild(row_item);
        orders[item] = undefined;
      }
    </script>
  <head>

  <body>
    <div style="float:left;">
      <img src="menu.gif" width="500" height="487" alt="Planets" usemap="#menumap"></td>
    </div>

    <div style="float:left;">
      <table border="1" width="480px" id="tblmain">
        <tr><th colspan="4">Order Form</th></tr>
        <tr>
          <th>Item</th>
          <th>Price</th>
          <th>Qty</th>
          <th>Qty * Price</th>
        </tr>

        <tr id="total">
          <th colspan="3" align="right"><b>TOTAL (RM)</b></th>
          <th id="totalpay" align="right">0</th>
        </tr>

        <tr id="add">
          <td id="item">...</td>
          <td id="price" align="right">...</td>
          <td align="center"><input type="text" id="qty" size="3" style="text-align:right;"></td>
          <td align="center"><input type="button" id="addupdate" value="Add/Update" onclick="itemAddUpdate();"></td>
        </tr>
      </table>
      <p>
      <table border="1" width="480px" id="tblcust">
        <tr><th colspan="2">Customer Form</th></tr>
        <tr>
          <th align="right">Name:</th>
          <td><input type="text" id="name" size="30" value="Lionel Messi"></td>
        </tr>
        <tr>
          <th align="right" valign="top">Address:</th>
          <td>
            <input type="text" id="address" size="50" value="Block L07, Jalan Merbau, KTHO">
            <br>
            <span style="font-size: 10pt;">(Apartment/building/unit no., street address)</span>
          </td>
        </tr>
        <tr>
          <th align="right">Area:</th>
          <td>
            <select id="area">
              <option value=""></option>
              <option value="Bandar Baru Kangkar Pulai">Bandar Baru Kangkar Pulai</option>
              <option value="Kangkar Pulai">Kangkar Pulai</option>
              <option value="Pulai Emas">Pulai Emas</option>
              <option value="Pulai Flora">Pulai Flora</option>
              <option value="Pulai Indah">Pulai Indah</option>
              <option value="Sri Pulai">Sri Pulai</option>
              <option value="Sri Pulai Perdana">Sri Pulai Perdana</option>
              <option value="Sri Pulai Perdana 2">Sri Pulai Perdana 2</option>
              <option value="UTM" selected>UTM</option>
            </select>
          </td>
        </tr>
        <tr><td colspan="2" align="center"><input type="button" id="saveorder" value="Save Order" onclick="alert('Try to save order...');"></td></tr>
      </table>
    </div>

    <map name="menumap">
      <area shape="rect" coords="0,138,23,154" alt="Chicken Burger"
            href="javascript: chooseItem('Chicken Burger', 8.8);" >
      <area shape="rect" coords="128,138,147,154" alt="Hotouch Burger"
            href="javascript: chooseItem('Hotouch Burger', 11.1);" >
      <area shape="rect" coords="252,138,272,154" alt="Tower Burger"
            href="javascript: chooseItem('Tower Burger', 13.8);" >
      <area shape="rect" coords="378,138,395,154" alt="Fish Fillet Burger"
            href="javascript: chooseItem('Fish Fillet Burger', 11.25);" >

      <area shape="rect" coords="0,282,23,298" alt="Lucky Plate"
            href="javascript: chooseItem('Lucky Plate', 11.90);" >
      <area shape="rect" coords="128,282,147,298" alt="Chick-A-Licious"
            href="javascript: chooseItem('Chick-A-Licious', 13.30);" >
      <area shape="rect" coords="252,282,272,298" alt="Chick-A-Mix"
            href="javascript: chooseItem('Chick-A-Mix', 11.90);" >
      <area shape="rect" coords="377,282,395,298" alt="Fish 'n' Chip"
            href="javascript: chooseItem('Fish \'n\' Chip', 13.90);" >

      <area shape="rect" coords="0,430,23,446" alt="Nasi Marrybrown"
            href="javascript: chooseItem('Nasi Marrybrown', 9.90);" >
      <area shape="rect" coords="128,430,147,446" alt="Nasi Ayam MB"
            href="javascript: chooseItem('Nasi Ayam MB', 10.30);" >
      <area shape="rect" coords="252,430,272,446" alt="Mi Kari MB"
            href="javascript: chooseItem('Mi Kari MB', 9.50);" >
      <area shape="rect" coords="335,430,354,446" alt="Chicken Porridge"
            href="javascript: chooseItem('Chicken Porridge', 6.50);" >
      <area shape="rect" coords="418,430,436,446" alt="Seafood Porridge"
            href="javascript: chooseItem('Seafood Porridge', 7.50);" >


    </map>
  </body>
</html>
